{
    "type": [
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2
    ],
    "data": [
        "+ ",
        "        ",
        "+ ",
        "      )) %>%",
        "+ ",
        "      mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "      mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "      mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "      mutate(time_period = str_glue(\"{Year[1]}-{Y2}\")) %>%",
        "+ ",
        "      filter(Year == Y2) %>% select(-Year)",
        "> ",
        "real_estate_periods_n",
        "\u001B[38;5;246m# A tibble: 150 × 7\u001B[39m\n   City_zip               Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001                     \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m792. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m3\u001B[24m923.  \u001B[4m6\u001B[24m\u001B[4m7\u001B[24m869. 0.390 39.02227% 2003-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Allen Park_48101                  \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m963. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m0\u001B[24m770.  \u001B[4m5\u001B[24m\u001B[4m8\u001B[24m193. 0.445 44.50003% 2003-2022  \n\u001B[38;5;250m 3\u001B[39m Allenton_48002                    \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m\u001B[4m8\u001B[24m397. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m7\u001B[24m381. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m016. 0.753 75.25608% 2003-2022  \n\u001B[38;5;250m 4\u001B[39m Armada_48005                      \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m070. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m1\u001B[24m496. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m5\u001B[24m575. 0.574 57.35841% 2003-2022  \n",
        "\u001B[38;5;250m 5\u001B[39m Auburn Hills_48326                \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m\u001B[4m3\u001B[24m683. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m729.  \u001B[4m4\u001B[24m\u001B[4m2\u001B[24m954. 0.214 21.39891% 2003-2022  \n\u001B[38;5;250m 6\u001B[39m Avoca_48006                       \u001B[4m2\u001B[24m\u001B[4m7\u001B[24m\u001B[4m9\u001B[24m453  \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m1\u001B[24m153.  \u001B[4m6\u001B[24m\u001B[4m8\u001B[24m300. 0.323 32.34647% 2003-2022  \n\u001B[38;5;250m 7\u001B[39m Berkley_48072                     \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m\u001B[4m5\u001B[24m200. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m228. \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[4m8\u001B[24m971. 0.585 58.51503% 2003-2022  \n",
        "\u001B[38;5;250m 8\u001B[39m Beverly Hills_48025               \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m\u001B[4m8\u001B[24m855  \u001B[4m3\u001B[24m\u001B[4m7\u001B[24m\u001B[4m5\u001B[24m324. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m3\u001B[24m531. 0.462 46.23515% 2003-2022  \n\u001B[38;5;250m 9\u001B[39m Birmingham_48009                  \u001B[4m6\u001B[24m\u001B[4m4\u001B[24m\u001B[4m8\u001B[24m652. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m\u001B[4m1\u001B[24m072. \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m580. 0.578 57.79530% 2003-2022  \n\u001B[38;5;250m10\u001B[39m Bloomfield Hills_48301            \u001B[4m6\u001B[24m\u001B[4m7\u001B[24m\u001B[4m0\u001B[24m829. \u001B[4m4\u001B[24m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m635. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m194. 0.390 38.99295% 2003-2022  \n",
        "\u001B[38;5;246m# … with 140 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "rm(list = ls())",
        "> ",
        "# Percentage Change Function ----",
        "> ",
        "periods_PC <- function(data, Y1, Y2, organize =\"FALSE\") {",
        "+ ",
        "",
        "+ ",
        "#> The following equation (PC <- (X2 - X1)/X1) will be used to calculate the percent change in equity",
        "+ ",
        "#> for different time periods for each of the zip codes in the data set.",
        "+ ",
        "#> Where \"PC\" is the Percentage Change, \"X1\" is the initial value, and \"X2\" is the Final Value.",
        "+ ",
        "#> With this function, we are seeking to understand what time periods provide the",
        "+ ",
        "#> highest gains in equity for a specific zip code in any given time frame.   ",
        "+ ",
        "",
        "+ ",
        "# Testing parameters",
        "+ ",
        "data <- Zillow_PC ",
        "+ ",
        "Y1 <- 2000",
        "+ ",
        "Y2 <- 2022",
        "+ ",
        "",
        "+ ",
        "# Select First Period",
        "+ ",
        "# Select only the require data",
        "+ ",
        "data_ini <- data %>% ",
        "+ ",
        "  filter(Year == Y1 | Year == Y2) %>% ",
        "+ ",
        "  select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "",
        "+ ",
        "# Calculate the First Time Period (Percentage Change) ",
        "+ ",
        "real_estate_periods <-  data_ini %>%",
        "+ ",
        "    mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "    mutate(lag1 = case_when(",
        "+ ",
        "      ",
        "+ ",
        "      Year == Y1 ~ Z_Home_Value_Index,",
        "+ ",
        "      TRUE ~ lag1",
        "+ ",
        "      ",
        "+ ",
        "    )) %>%",
        "+ ",
        "    mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "    mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "    mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "    mutate(time_period = str_glue(\"{Y1}-{Y2}\")) %>%",
        "+ ",
        "    filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "   ",
        "+ ",
        "# For loop to automate the calculation on the remaining periods     ",
        "+ ",
        "  for (i in 2:(Y2-Y1)) {",
        "+ ",
        "",
        "+ ",
        "    # Select First Period",
        "+ ",
        "    # Select only the require data",
        "+ ",
        "    data_ini <- data %>% ",
        "+ ",
        "      filter(Year == Year[i] | Year == Y2) %>% ",
        "+ ",
        "      select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "    ",
        "+ ",
        "    # Calculate the all the remaining Time Periods    ",
        "+ ",
        "    real_estate_periods_n <-  data_ini %>%",
        "+ ",
        "      mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "      mutate(lag1 = case_when(",
        "+ ",
        "        ",
        "+ ",
        "        Year == Year[1] ~ Z_Home_Value_Index,",
        "+ ",
        "        TRUE ~ lag1",
        "+ ",
        "        ",
        "+ ",
        "      )) %>%",
        "+ ",
        "      mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "      mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "      mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "      mutate(time_period = str_glue(\"{Year[1]}-{Y2}\")) %>%",
        "+ ",
        "      filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "    ",
        "+ ",
        "   # Store each new data frame by row",
        "+ ",
        "    real_estate_periods <- rbind(real_estate_periods, real_estate_periods_n)",
        "+ ",
        "   ",
        "+ ",
        "  }",
        "+ ",
        "",
        "+ ",
        "# Provide extra functionality to the user to arrange the data based on the percentage change column ",
        "+ ",
        "if (organize == \"TRUE\") {",
        "+ ",
        "  ",
        "+ ",
        "  period_1 <- real_estate_periods %>% arrange(desc(PC))",
        "+ ",
        "  ",
        "+ ",
        "  return(period_1)",
        "+ ",
        "  ",
        "+ ",
        "} ",
        "+ ",
        "",
        "+ ",
        "else {return(real_estate_periods)} ",
        "+ ",
        "",
        "+ ",
        "}",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022) ",
        "Error in periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022) : \n  object 'Zillow_PC' not found\n",
        "> ",
        "## ____________________________________",
        "> ",
        "##",
        "> ",
        "## Script name: Funciones",
        "> ",
        "##",
        "> ",
        "## Purpose of script: ",
        "> ",
        "##",
        "> ",
        "## Prerequisites: NA ",
        "> ",
        "##",
        "> ",
        "## Parameters: None.",
        "> ",
        "##",
        "> ",
        "## Results: ",
        "> ",
        "##",
        "> ",
        "## Return codes: ",
        "> ",
        "##                  0 - Success: xxx1",
        "> ",
        "##                  1 - Error  : xxx2",
        "> ",
        "##                  2 - Error  : xxx3",
        "> ",
        "##                  3 - Error  : xxx4",
        "> ",
        "##",
        "> ",
        "## Author: CITMOS",
        "> ",
        "##",
        "> ",
        "## Date Created: 2022-10-4",
        "> ",
        "##",
        "> ",
        "## Copyright (c) CITMOS, 2022",
        "> ",
        "## Email: CITMOS1@outlook.com",
        "> ",
        "## _______________________________________________",
        "> ",
        "## Notes:",
        "> ",
        "##   ",
        "> ",
        "##",
        "> ",
        "## _______________________________________________",
        "> ",
        "##",
        "> ",
        "## M O D I F I C A T I O N   H I S T O R Y",
        "> ",
        "##",
        "> ",
        "## 02FEB2023    person0",
        "> ",
        "## Changes:     The logic of Function periods_PC() has been modified.  ",
        "> ",
        "##",
        "> ",
        "##_______________________________________________",
        "> ",
        "",
        "> ",
        "# Packages ",
        "> ",
        "library(readxl)",
        "> ",
        "library(tidyverse)",
        "> ",
        "library(naniar)",
        "> ",
        "library(lubridate)",
        "> ",
        "library(stringr)",
        "> ",
        "library(fs)",
        "> ",
        "library(scales)",
        "> ",
        "",
        "> ",
        "source(\"04_Manipulacion_De_Datos_Data_wrangling/Zillow_and_Employment_Data_Review.R\")",
        "\u001B[01;34m.\u001B[0m\n├── \u001B[01;34m00_Material_de_Soporte\u001B[0m\n│   ├── Rcolor.pdf\n│   ├── R_lubridate.pdf\n│   └── R_strings.pdf\n├── \u001B[01;34m01_Informacion_Data\u001B[0m\n│   ├── \u001B[01;34mBureau Labor of Statistics Data\u001B[0m\n│   │   └── Detroit_Warren_Dearborn_202285.xlsx\n│   ├── \u001B[32mdata_import_landArea.R\u001B[0m\n│   ├── \u001B[32mdata_import_script.R\u001B[0m\n│   ├── \u001B[01;34mLand_Area\u001B[0m\n│   │   └── LandArea.xlsx\n│   ├── \u001B[32mPop_PC_CumS.R\u001B[0m",
        "\n│   ├── \u001B[01;34mUS_Census_Bureau\u001B[0m\n│   │   ├── ACSDP5Y2011.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2011.DP05-Data.csv\n│   │   ├── ACSDP5Y2011.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2011.DP05_2022-10-31T180229.zip\u001B[0m\n│   │   ├── ACSDP5Y2012.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2012.DP05-Data.csv\n│   │   ├── ACSDP5Y2012.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2012.DP05_2022-11-01T080453.zip\u001B[0m",
        "\n│   │   ├── ACSDP5Y2013.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2013.DP05-Data.csv\n│   │   ├── ACSDP5Y2013.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2013.DP05_2022-11-01T081112.zip\u001B[0m\n│   │   ├── ACSDP5Y2014.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2014.DP05-Data.csv\n│   │   ├── ACSDP5Y2014.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2014.DP05_2022-11-01T081604.zip\u001B[0m\n│   │   ├── ACSDP5Y2015.DP05-Column-Metadata.csv",
        "\n│   │   ├── ACSDP5Y2015.DP05-Data.csv\n│   │   ├── ACSDP5Y2015.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2015.DP05_2022-11-01T081827.zip\u001B[0m\n│   │   ├── ACSDP5Y2016.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2016.DP05-Data.csv\n│   │   ├── ACSDP5Y2016.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2016.DP05_2022-11-01T082249.zip\u001B[0m\n│   │   ├── ACSDP5Y2017.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2017.DP05-Data.csv",
        "\n│   │   ├── ACSDP5Y2017.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2017.DP05_2022-11-01T082643.zip\u001B[0m\n│   │   ├── ACSDP5Y2018.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2018.DP05-Data.csv\n│   │   ├── ACSDP5Y2018.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2018.DP05_2022-11-01T082752.zip\u001B[0m\n│   │   ├── ACSDP5Y2019.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2019.DP05-Data.csv\n│   │   ├── ACSDP5Y2019.DP05-Table-Notes.txt",
        "\n│   │   ├── \u001B[01;31mACSDP5Y2019.DP05_2022-11-01T083027.zip\u001B[0m\n│   │   ├── ACSDP5Y2020.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2020.DP05-Data.csv\n│   │   ├── ACSDP5Y2020.DP05-Table-Notes.txt\n│   │   └── \u001B[01;31mACSDP5Y2020.DP05_2022-11-01T083111.zip\u001B[0m\n│   ├── \u001B[01;34mZillow\u001B[0m\n│   │   └── Zip_zhvi_uc_sfrcondo_tier_0.33_0.67_sm_sa_month_8_5_2022.xlsx\n│   └── \u001B[32mZillow_PC_11_20_cumS.R\u001B[0m\n├── \u001B[01;34m02_Modelos\u001B[0m\n├── ",
        "\u001B[01;34m03_Paquetes_Packages\u001B[0m\n│   └── \u001B[32mIntalacion de Librerias (Packages).R\u001B[0m\n├── \u001B[01;34m04_Manipulacion_De_Datos_Data_wrangling\u001B[0m\n│   ├── \u001B[32mData_Merge.R\u001B[0m\n│   ├── \u001B[32mPop_Data_Review.R\u001B[0m\n│   └── \u001B[32mZillow_and_Employment_Data_Review.R\u001B[0m\n├── \u001B[01;34m05_Graficos_Graphics\u001B[0m\n│   ├── \u001B[32mData_Visualization_P1.R\u001B[0m\n│   └── \u001B[32mData_Visualization_P2.R\u001B[0m\n├── \u001B[01;34m06_funciones_y_interacion_iteration\u001B[0m\n│   ├── ",
        "\u001B[32mFunciones.R\u001B[0m\n│   └── Iteracion\n├── \u001B[01;34m07_Comunicacion\u001B[0m\n├── \u001B[01;34m08_Practica\u001B[0m\n│   └── exercise1.txt\n├── Analysis_&_Manipulation_De_Datos_En_Espanol.Rproj\n├── \u001B[01;34mProyecto_01\u001B[0m\n└── \u001B[01;34mProyecto_02\u001B[0m\n\u001B[38;5;252m`summarise()` has grouped output by 'City_zip'. You can override using the `.groups` argument.\u001B[39m\n",
        "> ",
        "# Testing function real_estate_periods ----  ",
        "> ",
        "real_estate_periods <- periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022) # , organize = \"TRUE\"",
        "> ",
        "real_estate_periods",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip               Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001                     \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m792. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m748.  \u001B[4m8\u001B[24m\u001B[4m5\u001B[24m044. 0.543 54.25526% 2000-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Allen Park_48101                  \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m963. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m0\u001B[24m898.  \u001B[4m7\u001B[24m\u001B[4m8\u001B[24m065. 0.704 70.39418% 2000-2022  \n\u001B[38;5;250m 3\u001B[39m Allenton_48002                    \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m\u001B[4m8\u001B[24m397. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m2\u001B[24m917. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m5\u001B[24m481. 0.899 89.91662% 2000-2022  \n\u001B[38;5;250m 4\u001B[39m Armada_48005                      \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m070. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m5\u001B[24m904. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m166. 0.803 80.25167% 2000-2022  \n",
        "\u001B[38;5;250m 5\u001B[39m Auburn Hills_48326                \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m\u001B[4m3\u001B[24m683. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m5\u001B[24m347.  \u001B[4m6\u001B[24m\u001B[4m8\u001B[24m337. 0.390 38.97226% 2000-2022  \n\u001B[38;5;250m 6\u001B[39m Avoca_48006                       \u001B[4m2\u001B[24m\u001B[4m7\u001B[24m\u001B[4m9\u001B[24m453  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m9\u001B[24m967.  \u001B[4m7\u001B[24m\u001B[4m9\u001B[24m486. 0.397 39.74927% 2000-2022  \n\u001B[38;5;250m 7\u001B[39m Berkley_48072                     \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m\u001B[4m5\u001B[24m200. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m0\u001B[24m948. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m4\u001B[24m251. 0.834 83.41259% 2000-2022  \n",
        "\u001B[38;5;250m 8\u001B[39m Beverly Hills_48025               \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m\u001B[4m8\u001B[24m855  \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m661. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m7\u001B[24m194. 0.706 70.63146% 2000-2022  \n\u001B[38;5;250m 9\u001B[39m Birmingham_48009                  \u001B[4m6\u001B[24m\u001B[4m4\u001B[24m\u001B[4m8\u001B[24m652. \u001B[4m3\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m694. \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m\u001B[4m4\u001B[24m958  0.834 83.39352% 2000-2022  \n\u001B[38;5;250m10\u001B[39m Bloomfield Hills_48301            \u001B[4m6\u001B[24m\u001B[4m7\u001B[24m\u001B[4m0\u001B[24m829. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m996. \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m2\u001B[24m833. 0.605 60.48687% 2000-2022  \n",
        "\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "View(real_estate_periods)",
        "> ",
        "View(real_estate_periods)",
        "> ",
        "# Testing function real_estate_periods ----  ",
        "> ",
        "real_estate_periods <- periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022, organize = \"TRUE\")  ",
        "> ",
        "real_estate_periods",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m749   4.27 426.91928% 2000-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "View(real_estate_periods)",
        "> ",
        "#> now we can use the real_estate_periods() function and identify the best and worst periods ",
        "> ",
        "#> per zip code",
        "> ",
        "max_period <- real_estate_periods %>% ",
        "+ ",
        "  group_by(City_zip) %>%",
        "+ ",
        "  summarise(selection = PC  %>% max()) %>% arrange(desc(selection))",
        "> ",
        "View(max_period)",
        "> ",
        "min_period <- real_estate_periods %>% ",
        "+ ",
        "  group_by(City_zip) %>%",
        "+ ",
        "  summarise(selection = PC  %>% min()) %>% arrange(selection)",
        "> ",
        "View(min_period)",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2005, Y2 = 2022, organize = \"TRUE\") ",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m749   4.27 426.91928% 2000-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2001, Y2 = 2011, organize = \"TRUE\") ",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m749   4.27 426.91928% 2000-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "data <- Zillow_PC ",
        "> ",
        "Y1 <- 2000",
        "> ",
        "Y2 <- 2022",
        "> ",
        "# Testing function real_estate_periods ----  ",
        "> ",
        "real_estate_periods <- periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022, organize = \"TRUE\")  ",
        "> ",
        "real_estate_periods",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m749   4.27 426.91928% 2000-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "rm(list = ls())",
        "> ",
        "# Packages ",
        "> ",
        "library(readxl)",
        "> ",
        "library(tidyverse)",
        "> ",
        "library(naniar)",
        "> ",
        "library(lubridate)",
        "> ",
        "library(stringr)",
        "> ",
        "library(fs)",
        "> ",
        "library(scales)",
        "> ",
        "",
        "> ",
        "source(\"04_Manipulacion_De_Datos_Data_wrangling/Zillow_and_Employment_Data_Review.R\")",
        "\u001B[01;34m.\u001B[0m\n├── \u001B[01;34m00_Material_de_Soporte\u001B[0m\n│   ├── Rcolor.pdf\n│   ├── R_lubridate.pdf\n│   └── R_strings.pdf\n├── \u001B[01;34m01_Informacion_Data\u001B[0m\n│   ├── \u001B[01;34mBureau Labor of Statistics Data\u001B[0m\n│   │   └── Detroit_Warren_Dearborn_202285.xlsx\n│   ├── \u001B[32mdata_import_landArea.R\u001B[0m\n│   ├── \u001B[32mdata_import_script.R\u001B[0m\n│   ├── \u001B[01;34mLand_Area\u001B[0m\n│   │   └── LandArea.xlsx\n│   ├── \u001B[32mPop_PC_CumS.R\u001B[0m",
        "\n│   ├── \u001B[01;34mUS_Census_Bureau\u001B[0m\n│   │   ├── ACSDP5Y2011.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2011.DP05-Data.csv\n│   │   ├── ACSDP5Y2011.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2011.DP05_2022-10-31T180229.zip\u001B[0m\n│   │   ├── ACSDP5Y2012.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2012.DP05-Data.csv\n│   │   ├── ACSDP5Y2012.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2012.DP05_2022-11-01T080453.zip\u001B[0m",
        "\n│   │   ├── ACSDP5Y2013.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2013.DP05-Data.csv\n│   │   ├── ACSDP5Y2013.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2013.DP05_2022-11-01T081112.zip\u001B[0m\n│   │   ├── ACSDP5Y2014.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2014.DP05-Data.csv\n│   │   ├── ACSDP5Y2014.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2014.DP05_2022-11-01T081604.zip\u001B[0m\n│   │   ├── ACSDP5Y2015.DP05-Column-Metadata.csv",
        "\n│   │   ├── ACSDP5Y2015.DP05-Data.csv\n│   │   ├── ACSDP5Y2015.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2015.DP05_2022-11-01T081827.zip\u001B[0m\n│   │   ├── ACSDP5Y2016.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2016.DP05-Data.csv\n│   │   ├── ACSDP5Y2016.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2016.DP05_2022-11-01T082249.zip\u001B[0m\n│   │   ├── ACSDP5Y2017.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2017.DP05-Data.csv",
        "\n│   │   ├── ACSDP5Y2017.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2017.DP05_2022-11-01T082643.zip\u001B[0m\n│   │   ├── ACSDP5Y2018.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2018.DP05-Data.csv\n│   │   ├── ACSDP5Y2018.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2018.DP05_2022-11-01T082752.zip\u001B[0m\n│   │   ├── ACSDP5Y2019.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2019.DP05-Data.csv\n│   │   ├── ACSDP5Y2019.DP05-Table-Notes.txt",
        "\n│   │   ├── \u001B[01;31mACSDP5Y2019.DP05_2022-11-01T083027.zip\u001B[0m\n│   │   ├── ACSDP5Y2020.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2020.DP05-Data.csv\n│   │   ├── ACSDP5Y2020.DP05-Table-Notes.txt\n│   │   └── \u001B[01;31mACSDP5Y2020.DP05_2022-11-01T083111.zip\u001B[0m\n│   ├── \u001B[01;34mZillow\u001B[0m\n│   │   └── Zip_zhvi_uc_sfrcondo_tier_0.33_0.67_sm_sa_month_8_5_2022.xlsx\n│   └── \u001B[32mZillow_PC_11_20_cumS.R\u001B[0m\n├── \u001B[01;34m02_Modelos\u001B[0m\n├── ",
        "\u001B[01;34m03_Paquetes_Packages\u001B[0m\n│   └── \u001B[32mIntalacion de Librerias (Packages).R\u001B[0m\n├── \u001B[01;34m04_Manipulacion_De_Datos_Data_wrangling\u001B[0m\n│   ├── \u001B[32mData_Merge.R\u001B[0m\n│   ├── \u001B[32mPop_Data_Review.R\u001B[0m\n│   └── \u001B[32mZillow_and_Employment_Data_Review.R\u001B[0m\n├── \u001B[01;34m05_Graficos_Graphics\u001B[0m\n│   ├── \u001B[32mData_Visualization_P1.R\u001B[0m\n│   └── \u001B[32mData_Visualization_P2.R\u001B[0m\n├── \u001B[01;34m06_funciones_y_interacion_iteration\u001B[0m\n│   ├── ",
        "\u001B[32mFunciones.R\u001B[0m\n│   └── Iteracion\n├── \u001B[01;34m07_Comunicacion\u001B[0m\n├── \u001B[01;34m08_Practica\u001B[0m\n│   └── exercise1.txt\n├── Analysis_&_Manipulation_De_Datos_En_Espanol.Rproj\n├── \u001B[01;34mProyecto_01\u001B[0m\n└── \u001B[01;34mProyecto_02\u001B[0m\n\u001B[38;5;252m`summarise()` has grouped output by 'City_zip'. You can override using the `.groups` argument.\u001B[39m\n",
        "> ",
        "# Percentage Change Function ----",
        "> ",
        "periods_PC <- function(data, Y1, Y2, organize =\"FALSE\") {",
        "+ ",
        "",
        "+ ",
        "#> The following equation (PC <- (X2 - X1)/X1) will be used to calculate the percent change in equity",
        "+ ",
        "#> for different time periods for each of the zip codes in the data set.",
        "+ ",
        "#> Where \"PC\" is the Percentage Change, \"X1\" is the initial value, and \"X2\" is the Final Value.",
        "+ ",
        "#> With this function, we are seeking to understand what time periods provide the",
        "+ ",
        "#> highest gains in equity for a specific zip code in any given time frame.",
        "+ ",
        "#> when was the best time to buy if you decided to sell in 2022.  ",
        "+ ",
        "",
        "+ ",
        "# Testing parameters",
        "+ ",
        "# data <- Zillow_PC ",
        "+ ",
        "# Y1 <- 2000",
        "+ ",
        "# Y2 <- 2022",
        "+ ",
        "",
        "+ ",
        "# Select First Period",
        "+ ",
        "# Select only the require data",
        "+ ",
        "data_ini <- data %>% ",
        "+ ",
        "  filter(Year == Y1 | Year == Y2) %>% ",
        "+ ",
        "  select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "",
        "+ ",
        "# Calculate the First Time Period (Percentage Change) ",
        "+ ",
        "real_estate_periods <-  data_ini %>%",
        "+ ",
        "    mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "    mutate(lag1 = case_when(",
        "+ ",
        "      ",
        "+ ",
        "      Year == Y1 ~ Z_Home_Value_Index,",
        "+ ",
        "      TRUE ~ lag1",
        "+ ",
        "      ",
        "+ ",
        "    )) %>%",
        "+ ",
        "    mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "    mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "    mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "    mutate(time_period = str_glue(\"{Y1}-{Y2}\")) %>%",
        "+ ",
        "    filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "   ",
        "+ ",
        "# For loop to automate the calculation on the remaining periods     ",
        "+ ",
        "  for (i in 2:(Y2-Y1)) {",
        "+ ",
        "",
        "+ ",
        "    # Select First Period",
        "+ ",
        "    # Select only the require data",
        "+ ",
        "    data_ini <- data %>% ",
        "+ ",
        "      filter(Year == Year[i] | Year == Y2) %>% ",
        "+ ",
        "      select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "    ",
        "+ ",
        "    # Calculate the all the remaining Time Periods    ",
        "+ ",
        "    real_estate_periods_n <-  data_ini %>%",
        "+ ",
        "      mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "      mutate(lag1 = case_when(",
        "+ ",
        "        ",
        "+ ",
        "        Year == Year[1] ~ Z_Home_Value_Index,",
        "+ ",
        "        TRUE ~ lag1",
        "+ ",
        "        ",
        "+ ",
        "      )) %>%",
        "+ ",
        "      mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "      mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "      mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "      mutate(time_period = str_glue(\"{Year[1]}-{Y2}\")) %>%",
        "+ ",
        "      filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "    ",
        "+ ",
        "   # Store each new data frame by row",
        "+ ",
        "    real_estate_periods <- rbind(real_estate_periods, real_estate_periods_n)",
        "+ ",
        "   ",
        "+ ",
        "  }",
        "+ ",
        "",
        "+ ",
        "# Provide extra functionality to the user to arrange the data based on the percentage change column ",
        "+ ",
        "if (organize == \"TRUE\") {",
        "+ ",
        "  ",
        "+ ",
        "  period_1 <- real_estate_periods %>% arrange(desc(PC))",
        "+ ",
        "  ",
        "+ ",
        "  return(period_1)",
        "+ ",
        "  ",
        "+ ",
        "} ",
        "+ ",
        "",
        "+ ",
        "else {return(real_estate_periods)} ",
        "+ ",
        "",
        "+ ",
        "}",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2003, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 450 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m671.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m363  0.881 88.073788% 2000-2003  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m631.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m7\u001B[24m870. 0.669 66.910639% 2000-2003  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m212.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m469. 0.646 64.637560% 2000-2003  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201                \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m8\u001B[24m280. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m7\u001B[24m\u001B[4m8\u001B[24m588. 0.563 56.258046% 2000-2003  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m671.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039. \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m632. 0.531 53.05549%  2001-2003  \n",
        "\u001B[38;5;250m 6\u001B[39m River Rouge_48218             \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m718.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m265. 0.521 52.114027% 2000-2003  \n\u001B[38;5;250m 7\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m212.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m8\u001B[24m710. 0.425 42.48731%  2001-2003  \n\u001B[38;5;250m 8\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m631.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.  \u001B[4m5\u001B[24m548. 0.394 39.39195%  2001-2003  \n\u001B[38;5;250m 9\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m4\u001B[24m354. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m7\u001B[24m\u001B[4m4\u001B[24m761. 0.357 35.669448% 2000-2003  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48238                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m978.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m6\u001B[24m805. 0.355 35.490727% 2000-2003  \n\u001B[38;5;246m# … with 440 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2004, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 600 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m462.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m154. 1.24  123.58670% 2000-2004  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48201                \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m305. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m613. 1.01  101.37469% 2000-2004  \n\u001B[38;5;250m 3\u001B[39m Detroit_48204                 \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m249.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m487. 0.977 97.66962%  2000-2004  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215                 \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m932.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m189. 0.969 96.87485%  2000-2004  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m462.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m423. 0.820 81.95609%  2001-2004  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215                 \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m932.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m430. 0.704 70.38741%  2001-2004  \n\u001B[38;5;250m 7\u001B[39m Detroit_48201                \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m305. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m3\u001B[24m505. 0.676 67.64349%  2001-2004  \n\u001B[38;5;250m 8\u001B[39m Detroit_48209                 \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m245.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m371. 0.671 67.14067%  2000-2004  \n\u001B[38;5;250m 9\u001B[39m Detroit_48204                 \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m249.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.   \u001B[4m9\u001B[24m165. 0.651 65.07968%  2001-2004  \n",
        "\u001B[38;5;250m10\u001B[39m River Rouge_48218             \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m042   \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m589  0.612 61.24622%  2000-2004  \n\u001B[38;5;246m# … with 590 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2005, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 750 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m296. 1.49  148.9818% 2000-2005  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m477. 1.15  114.5866% 2000-2005  \n\u001B[38;5;250m 3\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m140. 1.13  112.6254% 2000-2005  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201            \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m776. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m9\u001B[24m084. 1.07  106.7231% 2000-2005  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m565. 1.03  102.6228% 2001-2005  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215             \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m724.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m980. 0.957 95.7007%  2000-2005  \n\u001B[38;5;250m 7\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m155  0.792 79.2076%  2001-2005  \n\u001B[38;5;250m 8\u001B[39m Detroit_48238             \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m587.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m414. 0.752 75.1757%  2000-2005  \n\u001B[38;5;250m 9\u001B[39m Detroit_48226            \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m943. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m7\u001B[24m350. 0.751 75.0739%  2000-2005  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m732.  \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m280. 0.734 73.3646%  2001-2005  \n\u001B[38;5;246m# … with 740 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2007, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,050 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index    lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m672.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m364. 1.74  173.92626% 2000-2007  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48209             \u001B[4m6\u001B[24m\u001B[4m3\u001B[24m427.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m3\u001B[24m\u001B[4m7\u001B[24m554. 1.45  145.14491% 2000-2007  \n\u001B[38;5;250m 3\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m672.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m633. 1.23  122.92271% 2001-2007  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m914.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m171. 1.19  119.31683% 2000-2007  \n\u001B[38;5;250m 5\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m183.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m422. 1.14  114.11901% 2000-2007  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48209             \u001B[4m6\u001B[24m\u001B[4m3\u001B[24m427.  \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m732.  \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m694. 0.999 99.87946%  2001-2007  \n\u001B[38;5;250m 7\u001B[39m Detroit_48209             \u001B[4m6\u001B[24m\u001B[4m3\u001B[24m427.  \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m238.  \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m189. 0.908 90.8255%   2002-2007  \n\u001B[38;5;250m 8\u001B[39m Detroit_48201            \u001B[4m2\u001B[24m\u001B[4m6\u001B[24m\u001B[4m5\u001B[24m351. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m5\u001B[24m659. 0.900 89.95398%  2000-2007  \n\u001B[38;5;250m 9\u001B[39m Detroit_48215             \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m914.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m412. 0.898 89.81005%  2001-2007  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48209             \u001B[4m6\u001B[24m\u001B[4m3\u001B[24m427.  \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m962.  \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m465. 0.868 86.75891%  2003-2007  \n\u001B[38;5;246m# … with 1,040 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2009, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,350 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m899. 0.445 44.51761% 2000-2009  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m4\u001B[24m\u001B[4m6\u001B[24m647. 0.334 33.39253% 2000-2009  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m5\u001B[24m141. 0.251 25.0743%  2001-2009  \n\u001B[38;5;250m 4\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m586. 0.208 20.79550% 2000-2009  \n\u001B[38;5;250m 5\u001B[39m Detroit_48209                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m478.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m4\u001B[24m605  0.178 17.79836% 2000-2009  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m807.  \u001B[4m3\u001B[24m835. 0.176 17.5847%  2002-2009  \n\u001B[38;5;250m 7\u001B[39m River Rouge_48218             \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m468.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453   \u001B[4m4\u001B[24m015. 0.158 15.77384% 2000-2009  \n\u001B[38;5;250m 8\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m020. \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m159. 0.146 14.5505%  2001-2009  \n\u001B[38;5;250m 9\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m268.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m506. 0.128 12.80680% 2000-2009  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m540. 0.110 11.0487%  2001-2009  \n\u001B[38;5;246m# … with 1,340 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2003, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 450 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m671.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m363  0.881 88.073788% 2000-2003  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m631.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m7\u001B[24m870. 0.669 66.910639% 2000-2003  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m212.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m469. 0.646 64.637560% 2000-2003  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201                \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m8\u001B[24m280. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m7\u001B[24m\u001B[4m8\u001B[24m588. 0.563 56.258046% 2000-2003  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m671.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039. \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m632. 0.531 53.05549%  2001-2003  \n",
        "\u001B[38;5;250m 6\u001B[39m River Rouge_48218             \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m718.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m265. 0.521 52.114027% 2000-2003  \n\u001B[38;5;250m 7\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m212.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m8\u001B[24m710. 0.425 42.48731%  2001-2003  \n\u001B[38;5;250m 8\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m631.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.  \u001B[4m5\u001B[24m548. 0.394 39.39195%  2001-2003  \n\u001B[38;5;250m 9\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m4\u001B[24m354. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m7\u001B[24m\u001B[4m4\u001B[24m761. 0.357 35.669448% 2000-2003  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48238                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m978.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m6\u001B[24m805. 0.355 35.490727% 2000-2003  \n\u001B[38;5;246m# … with 440 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2005, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 750 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m296. 1.49  148.9818% 2000-2005  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m477. 1.15  114.5866% 2000-2005  \n\u001B[38;5;250m 3\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m140. 1.13  112.6254% 2000-2005  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201            \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m776. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m9\u001B[24m084. 1.07  106.7231% 2000-2005  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m565. 1.03  102.6228% 2001-2005  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215             \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m724.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m980. 0.957 95.7007%  2000-2005  \n\u001B[38;5;250m 7\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m155  0.792 79.2076%  2001-2005  \n\u001B[38;5;250m 8\u001B[39m Detroit_48238             \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m587.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m414. 0.752 75.1757%  2000-2005  \n\u001B[38;5;250m 9\u001B[39m Detroit_48226            \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m943. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m7\u001B[24m350. 0.751 75.0739%  2000-2005  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m732.  \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m280. 0.734 73.3646%  2001-2005  \n\u001B[38;5;246m# … with 740 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2010, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,500 × 7\u001B[39m\n   City_zip           Z_Home_Value_Index    lag1    diff       PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                          \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m    \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48202                  \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m5\u001B[24m\u001B[4m0\u001B[24m261.  \u001B[4m5\u001B[24m792.   0.115   11.5237%  2009-2010  \n",
        "\u001B[38;5;250m 2\u001B[39m Pinckney_48169                \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m7\u001B[24m356. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m4\u001B[24m592. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m764.   0.077\u001B[4m5\u001B[24m  7.7550%   2009-2010  \n\u001B[38;5;250m 3\u001B[39m Fowlerville_48836             \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m069. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m678.  \u001B[4m6\u001B[24m391.   0.054\u001B[4m3\u001B[24m  5.4310%   2009-2010  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201                 \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m801. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692.  \u001B[4m7\u001B[24m109.   0.050\u001B[4m9\u001B[24m  5.0891%   2000-2010  \n",
        "\u001B[38;5;250m 5\u001B[39m Casco_48064                   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m375. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m8\u001B[24m536    839.   0.006\u001B[4m0\u001B[24m\u001B[4m6\u001B[24m 0.6058%   2009-2010  \n\u001B[38;5;250m 6\u001B[39m Detroit_48204                  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m704.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.   -\u001B[31m57\u001B[39m\u001B[31m.\u001B[39m\u001B[31m5\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m00\u001B[39m\u001B[31m4\u001B[4m8\u001B[24m\u001B[4m9\u001B[24m\u001B[39m -0.4889%  2000-2010  \n\u001B[38;5;250m 7\u001B[39m Milford_48380                 \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m008. \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m8\u001B[24m308  -\u001B[31m\u001B[4m1\u001B[24m30\u001B[39m\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m00\u001B[39m\u001B[31m5\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m\u001B[39m -0.5455%  2009-2010  \n",
        "\u001B[38;5;250m 8\u001B[39m Smiths Creek_48074            \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m3\u001B[24m896. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m5\u001B[24m088  -\u001B[31m\u001B[4m1\u001B[24m19\u001B[39m\u001B[31m2\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m10\u001B[4m4\u001B[24m\u001B[39m  -1.0356%  2009-2010  \n\u001B[38;5;250m 9\u001B[39m Emmett_48022                  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m506. -\u001B[31m\u001B[4m1\u001B[24m89\u001B[39m\u001B[31m5\u001B[39m   -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m13\u001B[4m3\u001B[24m\u001B[39m  -1.32977% 2001-2010  \n\u001B[38;5;250m10\u001B[39m Emmett_48022                  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m679  -\u001B[31m\u001B[4m2\u001B[24m06\u001B[39m\u001B[31m8\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m14\u001B[4m5\u001B[24m\u001B[39m  -1.4492%  2009-2010  \n",
        "\u001B[38;5;246m# … with 1,490 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2002, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 300 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210                 \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m139.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m7\u001B[24m831  0.480 48.01962% 2000-2002  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m449.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m4\u001B[24m688. 0.399 39.85588% 2000-2002  \n\u001B[38;5;250m 3\u001B[39m River Rouge_48218             \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m770.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453   \u001B[4m9\u001B[24m317. 0.366 36.60603% 2000-2002  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m425. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m4\u001B[24m\u001B[4m5\u001B[24m732. 0.327 32.73800% 2000-2002  \n\u001B[38;5;250m 5\u001B[39m Detroit_48209                 \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m238.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m7\u001B[24m365. 0.285 28.46546% 2000-2002  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48238                 \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m705.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m4\u001B[24m532. 0.236 23.63470% 2000-2002  \n\u001B[38;5;250m 7\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m807.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m4\u001B[24m064. 0.229 22.90506% 2000-2002  \n\u001B[38;5;250m 8\u001B[39m Detroit_48210                 \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m139.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m4\u001B[24m100. 0.205 20.45919% 2001-2002  \n\u001B[38;5;250m 9\u001B[39m Detroit_48223                 \u001B[4m7\u001B[24m\u001B[4m4\u001B[24m193   \u001B[4m6\u001B[24m\u001B[4m1\u001B[24m757. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m436. 0.201 20.13731% 2000-2002  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m0\u001B[24m213. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m620. 0.194 19.38046% 2000-2002  \n\u001B[38;5;246m# … with 290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2005, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 750 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m308.  \u001B[4m2\u001B[24m\u001B[4m4\u001B[24m296. 1.49  148.9818% 2000-2005  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m477. 1.15  114.5866% 2000-2005  \n\u001B[38;5;250m 3\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m140. 1.13  112.6254% 2000-2005  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201            \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m776. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m9\u001B[24m084. 1.07  106.7231% 2000-2005  \n\u001B[38;5;250m 5\u001B[39m Detroit_48210             \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m604.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m039.  \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m565. 1.03  102.6228% 2001-2005  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215             \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m724.  \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m980. 0.957 95.7007%  2000-2005  \n\u001B[38;5;250m 7\u001B[39m Detroit_48204             \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m238.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m083.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m155  0.792 79.2076%  2001-2005  \n\u001B[38;5;250m 8\u001B[39m Detroit_48238             \u001B[4m3\u001B[24m\u001B[4m3\u001B[24m587.  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m173.  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m414. 0.752 75.1757%  2000-2005  \n\u001B[38;5;250m 9\u001B[39m Detroit_48226            \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m943. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m7\u001B[24m350. 0.751 75.0739%  2000-2005  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48209             \u001B[4m5\u001B[24m\u001B[4m5\u001B[24m013.  \u001B[4m3\u001B[24m\u001B[4m1\u001B[24m732.  \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m280. 0.734 73.3646%  2001-2005  \n\u001B[38;5;246m# … with 740 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2009, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,350 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m899. 0.445 44.51761% 2000-2009  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m4\u001B[24m\u001B[4m6\u001B[24m647. 0.334 33.39253% 2000-2009  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m5\u001B[24m141. 0.251 25.0743%  2001-2009  \n\u001B[38;5;250m 4\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m586. 0.208 20.79550% 2000-2009  \n\u001B[38;5;250m 5\u001B[39m Detroit_48209                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m478.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m4\u001B[24m605  0.178 17.79836% 2000-2009  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m807.  \u001B[4m3\u001B[24m835. 0.176 17.5847%  2002-2009  \n\u001B[38;5;250m 7\u001B[39m River Rouge_48218             \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m468.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453   \u001B[4m4\u001B[24m015. 0.158 15.77384% 2000-2009  \n\u001B[38;5;250m 8\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m020. \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m159. 0.146 14.5505%  2001-2009  \n\u001B[38;5;250m 9\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m268.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m506. 0.128 12.80680% 2000-2009  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m540. 0.110 11.0487%  2001-2009  \n\u001B[38;5;246m# … with 1,340 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2014, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 2,100 × 7\u001B[39m\n   City_zip               Z_Home_Value_Index    lag1    diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48201                     \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m6\u001B[24m143. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m796. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m347. 0.939 93.8843%  2011-2014  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48201                     \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m6\u001B[24m143. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m5\u001B[24m383. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m0\u001B[24m760  0.883 88.33745% 2012-2014  \n\u001B[38;5;250m 3\u001B[39m Dearborn_48126                     \u001B[4m8\u001B[24m\u001B[4m8\u001B[24m354.  \u001B[4m4\u001B[24m\u001B[4m9\u001B[24m510.  \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m844. 0.785 78.4565%  2011-2014  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215                      \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m412   \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.   \u001B[4m9\u001B[24m847. 0.784 78.36257% 2012-2014  \n\u001B[38;5;250m 5\u001B[39m Detroit_48201                     \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m6\u001B[24m143. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692.  \u001B[4m9\u001B[24m\u001B[4m6\u001B[24m451. 0.690 69.04515% 2000-2014  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215                      \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m412   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.   \u001B[4m8\u001B[24m991. 0.670 66.9951%  2011-2014  \n\u001B[38;5;250m 7\u001B[39m Dearborn_48126                     \u001B[4m8\u001B[24m\u001B[4m8\u001B[24m354.  \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m239.  \u001B[4m3\u001B[24m\u001B[4m4\u001B[24m115. 0.629 62.89668% 2012-2014  \n\u001B[38;5;250m 8\u001B[39m Detroit_48201                     \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m6\u001B[24m143. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m801.  \u001B[4m8\u001B[24m\u001B[4m9\u001B[24m342. 0.609 60.85887% 2010-2014  \n\u001B[38;5;250m 9\u001B[39m Ferndale_48220                    \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m406.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m706.  \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m700. 0.583 58.2749%  2011-2014  \n",
        "\u001B[38;5;250m10\u001B[39m Dearborn Heights_48127            \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m902.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m095.  \u001B[4m4\u001B[24m\u001B[4m2\u001B[24m807. 0.570 57.0038%  2011-2014  \n\u001B[38;5;246m# … with 2,090 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2009, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,350 × 7\u001B[39m\n   City_zip          Z_Home_Value_Index    lag1   diff    PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                         \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m899. 0.445 44.51761% 2000-2009  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692. \u001B[4m4\u001B[24m\u001B[4m6\u001B[24m647. 0.334 33.39253% 2000-2009  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m5\u001B[24m141. 0.251 25.0743%  2001-2009  \n\u001B[38;5;250m 4\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m593  \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m586. 0.208 20.79550% 2000-2009  \n\u001B[38;5;250m 5\u001B[39m Detroit_48209                 \u001B[4m3\u001B[24m\u001B[4m0\u001B[24m478.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m873.  \u001B[4m4\u001B[24m605  0.178 17.79836% 2000-2009  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215                 \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m642   \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m807.  \u001B[4m3\u001B[24m835. 0.176 17.5847%  2002-2009  \n\u001B[38;5;250m 7\u001B[39m River Rouge_48218             \u001B[4m2\u001B[24m\u001B[4m9\u001B[24m468.  \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m453   \u001B[4m4\u001B[24m015. 0.158 15.77384% 2000-2009  \n\u001B[38;5;250m 8\u001B[39m Detroit_48226                \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m179. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m020. \u001B[4m3\u001B[24m\u001B[4m2\u001B[24m159. 0.146 14.5505%  2001-2009  \n\u001B[38;5;250m 9\u001B[39m Detroit_48204                 \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m268.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.  \u001B[4m1\u001B[24m506. 0.128 12.80680% 2000-2009  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48201                \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m6\u001B[24m339. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m540. 0.110 11.0487%  2001-2009  \n\u001B[38;5;246m# … with 1,340 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2010, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,500 × 7\u001B[39m\n   City_zip           Z_Home_Value_Index    lag1    diff       PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                          \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m    \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48202                  \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m5\u001B[24m\u001B[4m0\u001B[24m261.  \u001B[4m5\u001B[24m792.   0.115   11.5237%  2009-2010  \n",
        "\u001B[38;5;250m 2\u001B[39m Pinckney_48169                \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m7\u001B[24m356. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m4\u001B[24m592. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m764.   0.077\u001B[4m5\u001B[24m  7.7550%   2009-2010  \n\u001B[38;5;250m 3\u001B[39m Fowlerville_48836             \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m069. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m7\u001B[24m678.  \u001B[4m6\u001B[24m391.   0.054\u001B[4m3\u001B[24m  5.4310%   2009-2010  \n\u001B[38;5;250m 4\u001B[39m Detroit_48201                 \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m801. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m692.  \u001B[4m7\u001B[24m109.   0.050\u001B[4m9\u001B[24m  5.0891%   2000-2010  \n",
        "\u001B[38;5;250m 5\u001B[39m Casco_48064                   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m9\u001B[24m375. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m8\u001B[24m536    839.   0.006\u001B[4m0\u001B[24m\u001B[4m6\u001B[24m 0.6058%   2009-2010  \n\u001B[38;5;250m 6\u001B[39m Detroit_48204                  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m704.  \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m761.   -\u001B[31m57\u001B[39m\u001B[31m.\u001B[39m\u001B[31m5\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m00\u001B[39m\u001B[31m4\u001B[4m8\u001B[24m\u001B[4m9\u001B[24m\u001B[39m -0.4889%  2000-2010  \n\u001B[38;5;250m 7\u001B[39m Milford_48380                 \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m008. \u001B[4m2\u001B[24m\u001B[4m3\u001B[24m\u001B[4m8\u001B[24m308  -\u001B[31m\u001B[4m1\u001B[24m30\u001B[39m\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m00\u001B[39m\u001B[31m5\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m\u001B[39m -0.5455%  2009-2010  \n",
        "\u001B[38;5;250m 8\u001B[39m Smiths Creek_48074            \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m3\u001B[24m896. \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m5\u001B[24m088  -\u001B[31m\u001B[4m1\u001B[24m19\u001B[39m\u001B[31m2\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m10\u001B[4m4\u001B[24m\u001B[39m  -1.0356%  2009-2010  \n\u001B[38;5;250m 9\u001B[39m Emmett_48022                  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m506. -\u001B[31m\u001B[4m1\u001B[24m89\u001B[39m\u001B[31m5\u001B[39m   -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m13\u001B[4m3\u001B[24m\u001B[39m  -1.32977% 2001-2010  \n\u001B[38;5;250m10\u001B[39m Emmett_48022                  \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m679  -\u001B[31m\u001B[4m2\u001B[24m06\u001B[39m\u001B[31m8\u001B[39m\u001B[31m.\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m14\u001B[4m5\u001B[24m\u001B[39m  -1.4492%  2009-2010  \n",
        "\u001B[38;5;246m# … with 1,490 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2005, Y2 = 2010, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 750 × 7\u001B[39m\n   City_zip        Z_Home_Value_Index    lag1    diff      PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Emmett_48022               \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m506.  -\u001B[31m\u001B[4m1\u001B[24m89\u001B[39m\u001B[31m5\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m13\u001B[4m3\u001B[24m\u001B[39m -1.32977%  2001-2010  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m0\u001B[24m736.  -\u001B[31m\u001B[4m4\u001B[24m68\u001B[39m\u001B[31m3\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m77\u001B[4m1\u001B[24m\u001B[39m -7.7106%   2002-2010  \n\u001B[38;5;250m 3\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m0\u001B[24m932   -\u001B[31m\u001B[4m4\u001B[24m87\u001B[39m\u001B[31m9\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m80\u001B[4m1\u001B[24m\u001B[39m -8.0078%   2003-2010  \n\u001B[38;5;250m 4\u001B[39m Detroit_48226              \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m9\u001B[24m170. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m020. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m8\u001B[39m\u001B[31m49\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m98\u001B[4m9\u001B[24m\u001B[39m -9.88574%  2001-2010  \n",
        "\u001B[38;5;250m 5\u001B[39m Macomb_48042               \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m2\u001B[24m807  \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m7\u001B[24m458. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m6\u001B[39m\u001B[31m52\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m108\u001B[39m  -10.83780% 2001-2010  \n\u001B[38;5;250m 6\u001B[39m Macomb_48044               \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m9\u001B[24m609. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m343. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m7\u001B[39m\u001B[31m34\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m115\u001B[39m  -11.53948% 2001-2010  \n\u001B[38;5;250m 7\u001B[39m Leonard_48367              \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m0\u001B[24m332. \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m1\u001B[24m693. -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m3\u001B[39m\u001B[31m61\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m125\u001B[39m  -12.45991% 2001-2010  \n",
        "\u001B[38;5;250m 8\u001B[39m Detroit_48201              \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m801. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m0\u001B[24m9\u001B[39m\u001B[31m98\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m125\u001B[39m  -12.51381% 2001-2010  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m4\u001B[24m156.  -\u001B[31m\u001B[4m8\u001B[24m10\u001B[39m\u001B[31m3\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m126\u001B[39m  -12.6300%  2004-2010  \n\u001B[38;5;250m10\u001B[39m Royal Oak_48067            \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m2\u001B[24m408. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m5\u001B[24m492. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m3\u001B[24m0\u001B[39m\u001B[31m84\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m132\u001B[39m  -13.15411% 2001-2010  \n",
        "\u001B[38;5;246m# … with 740 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2005, Y2 = 2010, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 750 × 7\u001B[39m\n   City_zip        Z_Home_Value_Index    lag1    diff      PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Emmett_48022               \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m0\u001B[24m611. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m506.  -\u001B[31m\u001B[4m1\u001B[24m89\u001B[39m\u001B[31m5\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m13\u001B[4m3\u001B[24m\u001B[39m -1.32977%  2001-2010  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m0\u001B[24m736.  -\u001B[31m\u001B[4m4\u001B[24m68\u001B[39m\u001B[31m3\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m77\u001B[4m1\u001B[24m\u001B[39m -7.7106%   2002-2010  \n\u001B[38;5;250m 3\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m0\u001B[24m932   -\u001B[31m\u001B[4m4\u001B[24m87\u001B[39m\u001B[31m9\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m80\u001B[4m1\u001B[24m\u001B[39m -8.0078%   2003-2010  \n\u001B[38;5;250m 4\u001B[39m Detroit_48226              \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m9\u001B[24m170. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m020. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m1\u001B[24m8\u001B[39m\u001B[31m49\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m98\u001B[4m9\u001B[24m\u001B[39m -9.88574%  2001-2010  \n",
        "\u001B[38;5;250m 5\u001B[39m Macomb_48042               \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m2\u001B[24m807  \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m7\u001B[24m458. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m6\u001B[39m\u001B[31m52\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m108\u001B[39m  -10.83780% 2001-2010  \n\u001B[38;5;250m 6\u001B[39m Macomb_48044               \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m9\u001B[24m609. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m343. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m7\u001B[39m\u001B[31m34\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m115\u001B[39m  -11.53948% 2001-2010  \n\u001B[38;5;250m 7\u001B[39m Leonard_48367              \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m\u001B[4m0\u001B[24m332. \u001B[4m2\u001B[24m\u001B[4m5\u001B[24m\u001B[4m1\u001B[24m693. -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m3\u001B[39m\u001B[31m61\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m125\u001B[39m  -12.45991% 2001-2010  \n",
        "\u001B[38;5;250m 8\u001B[39m Detroit_48201              \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m801. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m7\u001B[24m799. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m0\u001B[24m9\u001B[39m\u001B[31m98\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m125\u001B[39m  -12.51381% 2001-2010  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202               \u001B[4m5\u001B[24m\u001B[4m6\u001B[24m053.  \u001B[4m6\u001B[24m\u001B[4m4\u001B[24m156.  -\u001B[31m\u001B[4m8\u001B[24m10\u001B[39m\u001B[31m3\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m126\u001B[39m  -12.6300%  2004-2010  \n\u001B[38;5;250m10\u001B[39m Royal Oak_48067            \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m2\u001B[24m408. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m5\u001B[24m492. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m3\u001B[24m0\u001B[39m\u001B[31m84\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m132\u001B[39m  -13.15411% 2001-2010  \n",
        "\u001B[38;5;246m# … with 740 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 3,300 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m743.  \u001B[4m7\u001B[24m\u001B[4m5\u001B[24m749   4.27 426.91928% 2000-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;246m# … with 3,290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2010, Y2 = 2022, organize = \"TRUE\")  ",
        "\u001B[38;5;246m# A tibble: 1,800 × 7\u001B[39m\n   City_zip       Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                      \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215              \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215              \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215              \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215              \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m501.  \u001B[4m7\u001B[24m\u001B[4m2\u001B[24m991.  3.56 356.02784% 2001-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48202             \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48215              \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m807.  \u001B[4m7\u001B[24m\u001B[4m1\u001B[24m685.  3.29 328.7206%  2002-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48210              \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m906.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m153.  3.19 318.87813% 2011-2022  \n\u001B[38;5;250m 8\u001B[39m Dearborn_48126            \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m7\u001B[24m772. \u001B[4m4\u001B[24m\u001B[4m9\u001B[24m510. \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m8\u001B[24m262.  2.99 299.45903% 2011-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48202             \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m5\u001B[24m\u001B[4m0\u001B[24m261. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m0\u001B[24m371.  2.99 299.18160% 2009-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48238              \u001B[4m5\u001B[24m\u001B[4m1\u001B[24m521. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m369.  \u001B[4m3\u001B[24m\u001B[4m8\u001B[24m152.  2.85 285.36576% 2011-2022  \n\u001B[38;5;246m# … with 1,790 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "# Testing parameters",
        "> ",
        "data <- Zillow_PC",
        "> ",
        "Y1 <- 2005",
        "> ",
        "Y2 <- 2014",
        "> ",
        "# Select First Period",
        "> ",
        "# Select only the require data",
        "> ",
        "data_ini <- data %>% ",
        "+ ",
        "  filter(Year == Y1 | Year == Y2) %>% ",
        "+ ",
        "  select(City_zip:Z_Home_Value_Index)",
        "> ",
        "data_ini",
        "\u001B[38;5;246m# A tibble: 300 × 3\u001B[39m\n   City_zip            Year Z_Home_Value_Index\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m             \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m\n\u001B[38;5;250m 1\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.\n\u001B[38;5;250m 2\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211.\n\u001B[38;5;250m 3\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m447.\n\u001B[38;5;250m 4\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m014             \u001B[4m9\u001B[24m\u001B[4m5\u001B[24m784.\n",
        "\u001B[38;5;250m 5\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m6\u001B[24m950.\n\u001B[38;5;250m 6\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m299.\n\u001B[38;5;250m 7\u001B[39m Armada_48005        \u001B[4m2\u001B[24m005            \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m540.\n\u001B[38;5;250m 8\u001B[39m Armada_48005        \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m492.\n\u001B[38;5;250m 9\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m005            \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m2\u001B[24m217.\n\u001B[38;5;250m10\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m642.\n",
        "\u001B[38;5;246m# … with 290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        " data_ini %>%",
        "+ ",
        "    mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "    mutate(lag1 = case_when(",
        "+ ",
        "      ",
        "+ ",
        "      Year == Y1 ~ Z_Home_Value_Index,",
        "+ ",
        "      TRUE ~ lag1",
        "+ ",
        "      ",
        "+ ",
        "    )) %>%",
        "+ ",
        "    mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "    mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "    mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "    mutate(time_period = str_glue(\"{Y1}-{Y2}\")) %>%",
        "+ ",
        "    filter(Year == Y2) %>% select(-Year)",
        "\u001B[38;5;246m# A tibble: 150 × 7\u001B[39m\n   City_zip               Z_Home_Value_Index    lag1    diff       PC PC_ch     time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m    \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001                     \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211. \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966. -\u001B[31m\u001B[4m6\u001B[24m\u001B[4m1\u001B[24m7\u001B[39m\u001B[31m54\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m332\u001B[39m   -33.2074% 2005-2014  \n",
        "\u001B[38;5;250m 2\u001B[39m Allen Park_48101                   \u001B[4m9\u001B[24m\u001B[4m5\u001B[24m784. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m447. -\u001B[31m\u001B[4m4\u001B[24m\u001B[4m1\u001B[24m6\u001B[39m\u001B[31m64\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m303\u001B[39m   -30.3124% 2005-2014  \n\u001B[38;5;250m 3\u001B[39m Allenton_48002                    \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m299. \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m6\u001B[24m950. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m7\u001B[24m6\u001B[39m\u001B[31m51\u001B[39m  -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m140\u001B[39m   -14.0396% 2005-2014  \n\u001B[38;5;250m 4\u001B[39m Armada_48005                      \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m540. -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m3\u001B[24m0\u001B[39m\u001B[31m48\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m154\u001B[39m   -15.4043% 2005-2014  \n",
        "\u001B[38;5;250m 5\u001B[39m Auburn Hills_48326                \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m642. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m2\u001B[24m217. -\u001B[31m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m5\u001B[39m\u001B[31m74\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m328\u001B[39m   -32.7846% 2005-2014  \n\u001B[38;5;250m 6\u001B[39m Avoca_48006                       \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m766. \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m3\u001B[24m851. -\u001B[31m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m0\u001B[39m\u001B[31m85\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m384\u001B[39m   -38.3843% 2005-2014  \n\u001B[38;5;250m 7\u001B[39m Berkley_48072                     \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m6\u001B[24m955  \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m9\u001B[24m145. -\u001B[31m\u001B[4m2\u001B[24m\u001B[4m2\u001B[24m1\u001B[39m\u001B[31m90\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m111\u001B[39m   -11.1425% 2005-2014  \n",
        "\u001B[38;5;250m 8\u001B[39m Beverly Hills_48025               \u001B[4m3\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m638. \u001B[4m4\u001B[24m\u001B[4m0\u001B[24m\u001B[4m1\u001B[24m400. -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m4\u001B[24m7\u001B[39m\u001B[31m62\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m86\u001B[4m6\u001B[24m\u001B[39m  -8.6601%  2005-2014  \n\u001B[38;5;250m 9\u001B[39m Birmingham_48009                  \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m\u001B[4m4\u001B[24m010. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m\u001B[4m5\u001B[24m392   -\u001B[31m\u001B[4m1\u001B[24m38\u001B[39m\u001B[31m2\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m00\u001B[39m\u001B[31m3\u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[39m -0.3103%  2005-2014  \n",
        "\u001B[38;5;250m10\u001B[39m Bloomfield Hills_48301            \u001B[4m4\u001B[24m\u001B[4m7\u001B[24m\u001B[4m0\u001B[24m300. \u001B[4m5\u001B[24m\u001B[4m0\u001B[24m\u001B[4m8\u001B[24m142. -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m8\u001B[39m\u001B[31m43\u001B[39m\u001B[31m.\u001B[39m -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m74\u001B[4m5\u001B[24m\u001B[39m  -7.4473%  2005-2014  \n\u001B[38;5;246m# … with 140 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "# Calculate the First Time Period (Percentage Change) ",
        "> ",
        "real_estate_periods <-  data_ini %>%",
        "+ ",
        "    mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "    mutate(lag1 = case_when(",
        "+ ",
        "      ",
        "+ ",
        "      Year == Y1 ~ Z_Home_Value_Index,",
        "+ ",
        "      TRUE ~ lag1",
        "+ ",
        "      ",
        "+ ",
        "    )) %>%",
        "+ ",
        "    mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "    mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "    mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "    mutate(time_period = str_glue(\"{Y1}-{Y2}\")) %>%",
        "+ ",
        "    filter(Year == Y2) %>% select(-Year)",
        "> ",
        "2:(Y2-Y1)",
        "[1] 2 3 4 5 6 7 8 9\n",
        "> ",
        "data %>% ",
        "+ ",
        "      filter(Year == Year[2] | Year == Y2) %>% ",
        "+ ",
        "      select(City_zip:Z_Home_Value_Index)",
        "\u001B[38;5;246m# A tibble: 300 × 3\u001B[39m\n   City_zip            Year Z_Home_Value_Index\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m             \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m\n\u001B[38;5;250m 1\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m8\u001B[24m511 \n\u001B[38;5;250m 2\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211.\n\u001B[38;5;250m 3\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m0\u001B[24m107.\n\u001B[38;5;250m 4\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m014             \u001B[4m9\u001B[24m\u001B[4m5\u001B[24m784.\n",
        "\u001B[38;5;250m 5\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m7\u001B[24m020.\n\u001B[38;5;250m 6\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m299.\n\u001B[38;5;250m 7\u001B[39m Armada_48005        \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m7\u001B[24m998.\n\u001B[38;5;250m 8\u001B[39m Armada_48005        \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m492.\n\u001B[38;5;250m 9\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m7\u001B[24m674.\n\u001B[38;5;250m10\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m642.\n",
        "\u001B[38;5;246m# … with 290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "data %>% ",
        "+ ",
        "  filter(Year == Y1 | Year == Y2) ",
        "\u001B[38;5;246m# A tibble: 300 × 8\u001B[39m\n   City_zip            Year Z_Home_Value_Index ZHVI_lag1 ZHVI_diff ZHVI_PC_YoY ZHVI_Percentage_Change Loc_Zip_id\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m             \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m                  \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m3\u001B[24m928.     \u001B[4m2\u001B[24m037.      0.011\u001B[4m1\u001B[24m 1.10754088%            48001     \n",
        "\u001B[38;5;250m 2\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211.   \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[4m5\u001B[24m161.    \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m051.      0.181  18.11569281%           48001     \n\u001B[38;5;250m 3\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m447.   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m5\u001B[24m944.     \u001B[4m1\u001B[24m503.      0.011\u001B[4m1\u001B[24m 1.10591084%            48101     \n\u001B[38;5;250m 4\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m014             \u001B[4m9\u001B[24m\u001B[4m5\u001B[24m784.    \u001B[4m8\u001B[24m\u001B[4m4\u001B[24m201.    \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m582.      0.138  13.75576126%           48101     \n",
        "\u001B[38;5;250m 5\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m6\u001B[24m950.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m7\u001B[24m151.     \u001B[4m9\u001B[24m800.      0.052\u001B[4m4\u001B[24m 5.23615554%            48002     \n\u001B[38;5;250m 6\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m299.   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m1\u001B[24m956.    \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m343.      0.114  11.41322082%           48002     \n\u001B[38;5;250m 7\u001B[39m Armada_48005        \u001B[4m2\u001B[24m005            \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m540.   \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m6\u001B[24m818.     \u001B[4m7\u001B[24m722       0.037\u001B[4m3\u001B[24m 3.73371155%            48005     \n",
        "\u001B[38;5;250m 8\u001B[39m Armada_48005        \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m492.   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m419.    \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m072.      0.183  18.29787951%           48005     \n\u001B[38;5;250m 9\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m005            \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m2\u001B[24m217.   \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m6\u001B[24m758.     \u001B[4m5\u001B[24m458.      0.026\u001B[4m4\u001B[24m 2.63995808%            48326     \n\u001B[38;5;250m10\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m642.   \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m3\u001B[24m215.    \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m428.      0.158  15.76741119%           48326     \n",
        "\u001B[38;5;246m# … with 290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "data %>%",
        "+ ",
        "      filter(Year => Y1 | Year <= Y2)",
        "Error: '=>' is disabled; set '_R_USE_PIPEBIND_' envvar to a true value to enable it\n",
        "> ",
        "data %>%",
        "+ ",
        "      filter(Year >= Y1 | Year <= Y2)",
        "\u001B[38;5;246m# A tibble: 3,450 × 8\u001B[39m\n   City_zip       Year Z_Home_Value_Index ZHVI_lag1 ZHVI_diff ZHVI_PC_YoY ZHVI_Percentage_Change Loc_Zip_id\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m        \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m                  \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m000            \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m748.   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m748.        0       0      0.00000000%            48001     \n",
        "\u001B[38;5;250m 2\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m001            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m8\u001B[24m511    \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m748.    \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m763.      0.075\u001B[4m0\u001B[24m 7.50434482%            48001     \n\u001B[38;5;250m 3\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m002            \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m0\u001B[24m804    \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m8\u001B[24m511      \u001B[4m2\u001B[24m293       0.013\u001B[4m6\u001B[24m 1.36074203%            48001     \n\u001B[38;5;250m 4\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m003            \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m3\u001B[24m923.   \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m0\u001B[24m804      \u001B[4m3\u001B[24m119.      0.018\u001B[4m3\u001B[24m 1.82626480%            48001     \n",
        "\u001B[38;5;250m 5\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m004            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m3\u001B[24m928.   \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m\u001B[4m3\u001B[24m923.    \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m005.      0.057\u001B[4m5\u001B[24m 5.75263047%            48001     \n\u001B[38;5;250m 6\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m3\u001B[24m928.     \u001B[4m2\u001B[24m037.      0.011\u001B[4m1\u001B[24m 1.10754088%            48001     \n\u001B[38;5;250m 7\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m006            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m083.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.     \u001B[4m2\u001B[24m117.      0.011\u001B[4m4\u001B[24m 1.13847231%            48001     \n",
        "\u001B[38;5;250m 8\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m007            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m404.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m083.    -\u001B[31m\u001B[4m5\u001B[24m67\u001B[39m\u001B[31m9\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m30\u001B[4m2\u001B[24m\u001B[39m -3.01950427%           48001     \n\u001B[38;5;250m 9\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m008            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m239.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m404.   -\u001B[31m\u001B[4m1\u001B[24m\u001B[4m6\u001B[24m1\u001B[39m\u001B[31m64\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m88\u001B[4m6\u001B[24m\u001B[39m -8.86175939%           48001     \n",
        "\u001B[38;5;250m10\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m009            \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m518.   \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m239.   -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m4\u001B[24m7\u001B[39m\u001B[31m22\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m209\u001B[39m  -20.88649252%          48001     \n\u001B[38;5;246m# … with 3,440 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "Y1",
        "[1] 2005\n",
        "> ",
        "data %>%",
        "+ ",
        "      filter(Year >= Y1 & Year <= Y2)",
        "\u001B[38;5;246m# A tibble: 1,500 × 8\u001B[39m\n   City_zip       Year Z_Home_Value_Index ZHVI_lag1 ZHVI_diff ZHVI_PC_YoY ZHVI_Percentage_Change Loc_Zip_id\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m        \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m                  \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m005            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m3\u001B[24m928.     \u001B[4m2\u001B[24m037.      0.011\u001B[4m1\u001B[24m 1.10754088%            48001     \n",
        "\u001B[38;5;250m 2\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m006            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m083.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.     \u001B[4m2\u001B[24m117.      0.011\u001B[4m4\u001B[24m 1.13847231%            48001     \n\u001B[38;5;250m 3\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m007            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m404.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m083.    -\u001B[31m\u001B[4m5\u001B[24m67\u001B[39m\u001B[31m9\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m30\u001B[4m2\u001B[24m\u001B[39m -3.01950427%           48001     \n\u001B[38;5;250m 4\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m008            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m239.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m2\u001B[24m404.   -\u001B[31m\u001B[4m1\u001B[24m\u001B[4m6\u001B[24m1\u001B[39m\u001B[31m64\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m88\u001B[4m6\u001B[24m\u001B[39m -8.86175939%           48001     \n",
        "\u001B[38;5;250m 5\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m009            \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m518.   \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m6\u001B[24m239.   -\u001B[31m\u001B[4m3\u001B[24m\u001B[4m4\u001B[24m7\u001B[39m\u001B[31m22\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m209\u001B[39m  -20.88649252%          48001     \n\u001B[38;5;250m 6\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m010            \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m741.   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m1\u001B[24m518.   -\u001B[31m\u001B[4m1\u001B[24m\u001B[4m6\u001B[24m7\u001B[39m\u001B[31m77\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m128\u001B[39m  -12.75612813%          48001     \n",
        "\u001B[38;5;250m 7\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m011             \u001B[4m9\u001B[24m\u001B[4m9\u001B[24m036.   \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m741.   -\u001B[31m\u001B[4m1\u001B[24m\u001B[4m5\u001B[24m7\u001B[39m\u001B[31m06\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m137\u001B[39m  -13.68797185%          48001     \n\u001B[38;5;250m 8\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m012             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m496.    \u001B[4m9\u001B[24m\u001B[4m9\u001B[24m036.    -\u001B[31m\u001B[4m5\u001B[24m53\u001B[39m\u001B[31m9\u001B[39m\u001B[31m.\u001B[39m     -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m55\u001B[4m9\u001B[24m\u001B[39m -5.59302809%           48001     \n",
        "\u001B[38;5;250m 9\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m013            \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[4m5\u001B[24m161.    \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m496.    \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m664.      0.125  12.47561181%           48001     \n\u001B[38;5;250m10\u001B[39m Algonac_48001  \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211.   \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[4m5\u001B[24m161.    \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m051.      0.181  18.11569281%           48001     \n\u001B[38;5;246m# … with 1,490 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "data %>%",
        "+ ",
        "      filter(Year >= Y1 & Year <= Y2) %>%",
        "+ ",
        "      filter(Year == Year[2] | Year == Y2)",
        "\u001B[38;5;246m# A tibble: 300 × 8\u001B[39m\n   City_zip            Year Z_Home_Value_Index ZHVI_lag1 ZHVI_diff ZHVI_PC_YoY ZHVI_Percentage_Change Loc_Zip_id\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m             \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m              \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m       \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m                  \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m006            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m8\u001B[24m083.   \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m5\u001B[24m966.     \u001B[4m2\u001B[24m117.     0.011\u001B[4m4\u001B[24m  1.13847231%            48001     \n",
        "\u001B[38;5;250m 2\u001B[39m Algonac_48001       \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m4\u001B[24m211.   \u001B[4m1\u001B[24m\u001B[4m0\u001B[24m\u001B[4m5\u001B[24m161.    \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m051.     0.181   18.11569281%           48001     \n\u001B[38;5;250m 3\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m006            \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m5\u001B[24m920.   \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m\u001B[4m7\u001B[24m447.    -\u001B[31m\u001B[4m1\u001B[24m52\u001B[39m\u001B[31m7\u001B[39m\u001B[31m.\u001B[39m    -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m11\u001B[4m1\u001B[24m\u001B[39m  -1.11079045%           48101     \n\u001B[38;5;250m 4\u001B[39m Allen Park_48101    \u001B[4m2\u001B[24m014             \u001B[4m9\u001B[24m\u001B[4m5\u001B[24m784.    \u001B[4m8\u001B[24m\u001B[4m4\u001B[24m201.    \u001B[4m1\u001B[24m\u001B[4m1\u001B[24m582.     0.138   13.75576126%           48101     \n",
        "\u001B[38;5;250m 5\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m006            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m4\u001B[24m997.   \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m\u001B[4m6\u001B[24m950.   -\u001B[31m\u001B[4m1\u001B[24m\u001B[4m1\u001B[24m9\u001B[39m\u001B[31m53\u001B[39m\u001B[31m.\u001B[39m    -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m60\u001B[4m7\u001B[24m\u001B[39m  -6.06921717%           48002     \n\u001B[38;5;250m 6\u001B[39m Allenton_48002      \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m\u001B[4m9\u001B[24m299.   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m1\u001B[24m956.    \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m343.     0.114   11.41322082%           48002     \n\u001B[38;5;250m 7\u001B[39m Armada_48005        \u001B[4m2\u001B[24m006            \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m5\u001B[24m069.   \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m4\u001B[24m540.      529.     0.002\u001B[4m4\u001B[24m\u001B[4m6\u001B[24m 0.24645715%            48005     \n",
        "\u001B[38;5;250m 8\u001B[39m Armada_48005        \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m8\u001B[24m\u001B[4m1\u001B[24m492.   \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m3\u001B[24m419.    \u001B[4m2\u001B[24m\u001B[4m8\u001B[24m072.     0.183   18.29787951%           48005     \n\u001B[38;5;250m 9\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m006            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m9\u001B[24m484.   \u001B[4m2\u001B[24m\u001B[4m1\u001B[24m\u001B[4m2\u001B[24m217.    -\u001B[31m\u001B[4m2\u001B[24m73\u001B[39m\u001B[31m3\u001B[39m\u001B[31m.\u001B[39m    -\u001B[31m0\u001B[39m\u001B[31m.\u001B[39m\u001B[31m0\u001B[39m\u001B[31m12\u001B[4m9\u001B[24m\u001B[39m  -1.28771696%           48326     \n\u001B[38;5;250m10\u001B[39m Auburn Hills_48326  \u001B[4m2\u001B[24m014            \u001B[4m1\u001B[24m\u001B[4m4\u001B[24m\u001B[4m2\u001B[24m642.   \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m\u001B[4m3\u001B[24m215.    \u001B[4m1\u001B[24m\u001B[4m9\u001B[24m428.     0.158   15.76741119%           48326     \n",
        "\u001B[38;5;246m# … with 290 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "rm(list = ls())",
        "> ",
        "# Packages ",
        "> ",
        "library(readxl)",
        "> ",
        "library(tidyverse)",
        "> ",
        "library(naniar)",
        "> ",
        "library(lubridate)",
        "> ",
        "library(stringr)",
        "> ",
        "library(fs)",
        "> ",
        "library(scales)",
        "> ",
        "",
        "> ",
        "source(\"04_Manipulacion_De_Datos_Data_wrangling/Zillow_and_Employment_Data_Review.R\")",
        "\u001B[01;34m.\u001B[0m\n├── \u001B[01;34m00_Material_de_Soporte\u001B[0m\n│   ├── Rcolor.pdf\n│   ├── R_lubridate.pdf\n│   └── R_strings.pdf\n├── \u001B[01;34m01_Informacion_Data\u001B[0m\n│   ├── \u001B[01;34mBureau Labor of Statistics Data\u001B[0m\n│   │   └── Detroit_Warren_Dearborn_202285.xlsx\n│   ├── \u001B[32mdata_import_landArea.R\u001B[0m\n│   ├── \u001B[32mdata_import_script.R\u001B[0m\n│   ├── \u001B[01;34mLand_Area\u001B[0m\n│   │   └── LandArea.xlsx\n│   ├── \u001B[32mPop_PC_CumS.R\u001B[0m",
        "\n│   ├── \u001B[01;34mUS_Census_Bureau\u001B[0m\n│   │   ├── ACSDP5Y2011.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2011.DP05-Data.csv\n│   │   ├── ACSDP5Y2011.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2011.DP05_2022-10-31T180229.zip\u001B[0m\n│   │   ├── ACSDP5Y2012.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2012.DP05-Data.csv\n│   │   ├── ACSDP5Y2012.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2012.DP05_2022-11-01T080453.zip\u001B[0m",
        "\n│   │   ├── ACSDP5Y2013.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2013.DP05-Data.csv\n│   │   ├── ACSDP5Y2013.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2013.DP05_2022-11-01T081112.zip\u001B[0m\n│   │   ├── ACSDP5Y2014.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2014.DP05-Data.csv\n│   │   ├── ACSDP5Y2014.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2014.DP05_2022-11-01T081604.zip\u001B[0m\n│   │   ├── ACSDP5Y2015.DP05-Column-Metadata.csv",
        "\n│   │   ├── ACSDP5Y2015.DP05-Data.csv\n│   │   ├── ACSDP5Y2015.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2015.DP05_2022-11-01T081827.zip\u001B[0m\n│   │   ├── ACSDP5Y2016.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2016.DP05-Data.csv\n│   │   ├── ACSDP5Y2016.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2016.DP05_2022-11-01T082249.zip\u001B[0m\n│   │   ├── ACSDP5Y2017.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2017.DP05-Data.csv",
        "\n│   │   ├── ACSDP5Y2017.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2017.DP05_2022-11-01T082643.zip\u001B[0m\n│   │   ├── ACSDP5Y2018.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2018.DP05-Data.csv\n│   │   ├── ACSDP5Y2018.DP05-Table-Notes.txt\n│   │   ├── \u001B[01;31mACSDP5Y2018.DP05_2022-11-01T082752.zip\u001B[0m\n│   │   ├── ACSDP5Y2019.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2019.DP05-Data.csv\n│   │   ├── ACSDP5Y2019.DP05-Table-Notes.txt",
        "\n│   │   ├── \u001B[01;31mACSDP5Y2019.DP05_2022-11-01T083027.zip\u001B[0m\n│   │   ├── ACSDP5Y2020.DP05-Column-Metadata.csv\n│   │   ├── ACSDP5Y2020.DP05-Data.csv\n│   │   ├── ACSDP5Y2020.DP05-Table-Notes.txt\n│   │   └── \u001B[01;31mACSDP5Y2020.DP05_2022-11-01T083111.zip\u001B[0m\n│   ├── \u001B[01;34mZillow\u001B[0m\n│   │   └── Zip_zhvi_uc_sfrcondo_tier_0.33_0.67_sm_sa_month_8_5_2022.xlsx\n│   └── \u001B[32mZillow_PC_11_20_cumS.R\u001B[0m\n├── \u001B[01;34m02_Modelos\u001B[0m\n├── ",
        "\u001B[01;34m03_Paquetes_Packages\u001B[0m\n│   └── \u001B[32mIntalacion de Librerias (Packages).R\u001B[0m\n├── \u001B[01;34m04_Manipulacion_De_Datos_Data_wrangling\u001B[0m\n│   ├── \u001B[32mData_Merge.R\u001B[0m\n│   ├── \u001B[32mPop_Data_Review.R\u001B[0m\n│   └── \u001B[32mZillow_and_Employment_Data_Review.R\u001B[0m\n├── \u001B[01;34m05_Graficos_Graphics\u001B[0m\n│   ├── \u001B[32mData_Visualization_P1.R\u001B[0m\n│   └── \u001B[32mData_Visualization_P2.R\u001B[0m\n├── \u001B[01;34m06_funciones_y_interacion_iteration\u001B[0m\n│   ├── ",
        "\u001B[32mFunciones.R\u001B[0m\n│   └── Iteracion\n├── \u001B[01;34m07_Comunicacion\u001B[0m\n├── \u001B[01;34m08_Practica\u001B[0m\n│   └── exercise1.txt\n├── Analysis_&_Manipulation_De_Datos_En_Espanol.Rproj\n├── \u001B[01;34mProyecto_01\u001B[0m\n└── \u001B[01;34mProyecto_02\u001B[0m\n\u001B[38;5;252m`summarise()` has grouped output by 'City_zip'. You can override using the `.groups` argument.\u001B[39m\n",
        "> ",
        "",
        "> ",
        "# City_zip_uniq_20PC <- (Zillow_PC %>% select(City_zip) %>% unique() %>% nrow() * .20) %>% round(digits = 0)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "# Percentage Change Function ----",
        "> ",
        "periods_PC <- function(data, Y1, Y2, organize =\"FALSE\") {",
        "+ ",
        "",
        "+ ",
        "#> The following equation (PC <- (X2 - X1)/X1) will be used to calculate the percent change in equity",
        "+ ",
        "#> for different time periods for each of the zip codes in the data set.",
        "+ ",
        "#> Where \"PC\" is the Percentage Change, \"X1\" is the initial value, and \"X2\" is the Final Value.",
        "+ ",
        "#> With this function, we are seeking to understand what time periods provide the",
        "+ ",
        "#> highest gains in equity for a specific zip code in any given time frame.",
        "+ ",
        "#> when was the best time to buy if you decided to sell in 2022.  ",
        "+ ",
        "",
        "+ ",
        "# Testing parameters",
        "+ ",
        "# data <- Zillow_PC",
        "+ ",
        "# Y1 <- 2005",
        "+ ",
        "# Y2 <- 2014",
        "+ ",
        "",
        "+ ",
        "# Select First Period",
        "+ ",
        "# Select only the require data",
        "+ ",
        "data_ini <- data %>% ",
        "+ ",
        "  filter(Year == Y1 | Year == Y2) %>% ",
        "+ ",
        "  select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "",
        "+ ",
        "# Calculate the First Time Period (Percentage Change) ",
        "+ ",
        "real_estate_periods <-  data_ini %>%",
        "+ ",
        "    mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "    mutate(lag1 = case_when(",
        "+ ",
        "      ",
        "+ ",
        "      Year == Y1 ~ Z_Home_Value_Index,",
        "+ ",
        "      TRUE ~ lag1",
        "+ ",
        "      ",
        "+ ",
        "    )) %>%",
        "+ ",
        "    mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "    mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "    mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "    mutate(time_period = str_glue(\"{Y1}-{Y2}\")) %>%",
        "+ ",
        "    filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "   ",
        "+ ",
        "# For loop to automate the calculation on the remaining periods     ",
        "+ ",
        "  for (i in 2:(Y2-Y1)) {",
        "+ ",
        "",
        "+ ",
        "    # Select First Period",
        "+ ",
        "    # Select only the require data",
        "+ ",
        "    data_ini <- data %>%",
        "+ ",
        "      filter(Year >= Y1 & Year <= Y2) %>%",
        "+ ",
        "      filter(Year == Year[i] | Year == Y2) %>% ",
        "+ ",
        "      select(City_zip:Z_Home_Value_Index)",
        "+ ",
        "    ",
        "+ ",
        "    # Calculate the all the remaining Time Periods    ",
        "+ ",
        "    real_estate_periods_n <-  data_ini %>%",
        "+ ",
        "      mutate(lag1 = lag(x = Z_Home_Value_Index, n = 1)) %>% ",
        "+ ",
        "      mutate(lag1 = case_when(",
        "+ ",
        "        ",
        "+ ",
        "        Year == Year[1] ~ Z_Home_Value_Index,",
        "+ ",
        "        TRUE ~ lag1",
        "+ ",
        "        ",
        "+ ",
        "      )) %>%",
        "+ ",
        "      mutate(diff   = Z_Home_Value_Index - lag1) %>%",
        "+ ",
        "      mutate(PC     = diff/lag1) %>% ",
        "+ ",
        "      mutate(PC_ch  = scales::percent(PC)) %>%",
        "+ ",
        "      mutate(time_period = str_glue(\"{Year[1]}-{Y2}\")) %>%",
        "+ ",
        "      filter(Year == Y2) %>% select(-Year)",
        "+ ",
        "    ",
        "+ ",
        "   # Store each new data frame by row",
        "+ ",
        "    real_estate_periods <- rbind(real_estate_periods, real_estate_periods_n)",
        "+ ",
        "   ",
        "+ ",
        "  }",
        "+ ",
        "",
        "+ ",
        "# Provide extra functionality to the user to arrange the data based on the percentage change column ",
        "+ ",
        "if (organize == \"TRUE\") {",
        "+ ",
        "  ",
        "+ ",
        "  period_1 <- real_estate_periods %>% arrange(desc(PC))",
        "+ ",
        "  ",
        "+ ",
        "  return(period_1)",
        "+ ",
        "  ",
        "+ ",
        "} ",
        "+ ",
        "",
        "+ ",
        "else {return(real_estate_periods)} ",
        "+ ",
        "",
        "+ ",
        "}",
        "> ",
        "periods_PC(data = Zillow_PC, Y1 = 2010, Y2 = 2022, organize = \"TRUE\")",
        "\u001B[38;5;246m# A tibble: 1,800 × 7\u001B[39m\n   City_zip      Z_Home_Value_Index   lag1    diff    PC PC_ch      time_period\n   \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m                     \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m  \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m   \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<dbl>\u001B[39m\u001B[23m \u001B[3m\u001B[38;5;246m<chr>\u001B[39m\u001B[23m      \u001B[3m\u001B[38;5;246m<glue>\u001B[39m\u001B[23m     \n\u001B[38;5;250m 1\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m565.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m927.  6.44 644.04351% 2012-2022  \n",
        "\u001B[38;5;250m 2\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m3\u001B[24m421.  \u001B[4m8\u001B[24m\u001B[4m0\u001B[24m071.  5.97 596.62401% 2011-2022  \n\u001B[38;5;250m 3\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m6\u001B[24m957   \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m535.  4.51 451.3485%  2010-2022  \n\u001B[38;5;250m 4\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m1\u001B[24m\u001B[4m7\u001B[24m244.  \u001B[4m7\u001B[24m\u001B[4m6\u001B[24m248.  4.42 442.164%   2013-2022  \n\u001B[38;5;250m 5\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m227. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m9\u001B[24m405.  3.87 386.65409% 2012-2022  \n",
        "\u001B[38;5;250m 6\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m3\u001B[24m653. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m979   3.60 359.609%   2013-2022  \n\u001B[38;5;250m 7\u001B[39m Detroit_48202            \u001B[4m2\u001B[24m\u001B[4m0\u001B[24m\u001B[4m0\u001B[24m632. \u001B[4m4\u001B[24m\u001B[4m4\u001B[24m084. \u001B[4m1\u001B[24m\u001B[4m5\u001B[24m\u001B[4m6\u001B[24m548   3.55 355.11565% 2011-2022  \n\u001B[38;5;250m 8\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m360.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m699.  3.37 337.38260% 2012-2022  \n\u001B[38;5;250m 9\u001B[39m Detroit_48210             \u001B[4m5\u001B[24m\u001B[4m4\u001B[24m059. \u001B[4m1\u001B[24m\u001B[4m2\u001B[24m906.  \u001B[4m4\u001B[24m\u001B[4m1\u001B[24m153.  3.19 318.87813% 2011-2022  \n",
        "\u001B[38;5;250m10\u001B[39m Detroit_48215             \u001B[4m9\u001B[24m\u001B[4m3\u001B[24m492. \u001B[4m2\u001B[24m\u001B[4m2\u001B[24m412   \u001B[4m7\u001B[24m\u001B[4m1\u001B[24m080.  3.17 317.1523%  2014-2022  \n\u001B[38;5;246m# … with 1,790 more rows\u001B[39m\n\u001B[38;5;246m# ℹ Use `print(n = ...)` to see more rows\u001B[39m\n",
        "> ",
        "# Testing function real_estate_periods ----  ",
        "> ",
        "real_estate_periods <- periods_PC(data = Zillow_PC, Y1 = 2000, Y2 = 2022, organize = \"TRUE\")  ",
        "> ",
        "View(real_estate_periods)",
        "> ",
        "View(real_estate_periods)",
        "\nRestarting R session...\n\n"
    ]
}